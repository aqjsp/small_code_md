# C语言基础语法：数据类型与表达式

目标：掌握基本数据类型、常量与变量、类型转换与表达式求值顺序。

## 1. 基本数据类型与尺寸
- 整型：char, short, int, long, long long（有/无符号）
- 浮点：float, double, long double
- 其他：_Bool（C99）, 枚举 enum
- 尺寸由实现决定，通过sizeof获取：sizeof(int)
- 典型关系：sizeof(char)==1 字节；整数有整型提升规则。

## 2. 常量与变量
- 整数字面量：10, 0xFF, 0755, 10u, 10L
- 浮点字面量：1.0, 1e-3, 1.0f
- 字符与字符串：'A', '\n', "hello"
- 声明与初始化：int x = 42; const double PI = 3.14159;
- const 表示只读承诺，非真正常量表达式时仍占存储。

## 3. 表达式与运算符
- 算术：+ - * / %
- 关系与逻辑：< <= > >= == != 以及 && || !
- 位运算：& | ^ ~ << >>
- 赋值与复合赋值：=, +=, -= ...
- 条件运算符：?:
- 逗号运算符与序列点（C11之后为序列点概念被序列规则取代）

## 4. 类型转换
- 隐式转换：整型提升、算术转换（如 int 与 double -> double）
- 显式转换：强制类型转换 (type)expr，注意截断与溢出
- 布尔上下文：C中非零为真、零为假；建议使用显式比较以提高可读性。

## 5. 求值顺序与未定义行为
- 运算符优先级与结合性：() > 一元运算 > 乘除 > 加减 > ...
- 求值顺序未完全定义，例如 f(i)+g(i++) 可能未定义行为；
- 避免在同一序列中对同一标量有未序列化的多次修改或读写依赖。

## 6. 练习
- 打印各基本类型的sizeof。
- 演示整型提升与溢出：将char与int相加、观察强转结果。
- 设计若干表达式，判断其值与类型，并验证编译器警告。

## 更多示例

示例A：整型提升与字符计算
```c
#include <stdio.h>
int main(void){
    char c = 200;           // 可能溢出，取决于char是否有符号
    int x = c + 1;          // 整型提升到int
    printf("c=%d, x=%d\n", (int)c, x);
    return 0;
}
```

示例B：强制类型转换的截断
```c
#include <stdio.h>
int main(void){
    double d = 3.9;
    int i = (int)d; // 截断为3
    printf("%f -> %d\n", d, i);
    return 0;
}
```

示例C：未定义行为（避免）
```c
#include <stdio.h>
int main(void){
    int i = 0;
    // printf("%d %d\n", i, i++); // 未指定求值顺序，行为不可靠
    // 正确做法：分开求值
    int t = i;
    i++;
    printf("%d %d\n", t, i);
    return 0;
}
```

## 练习参考答案（节选）
- 判断表达式类型与值：使用sizeof与打印类型推断结果，或借助静态断言（C11 _Static_assert）。
- 演示溢出：比较带符号与无符号加法结果，观察警告并解释编译器行为。

## 参考资料
- C11 标准（整数提升与算术转换章节）：https://port70.net/~nsz/c/c11/n1570.html
- GCC/Clang关于未定义行为与警告选项：-Wall -Wextra -Wconversion -Wsign-conversion